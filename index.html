<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Candle Additive Calculator</title>
<style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    input { padding: 6px; margin: 4px 0; width: 100%; }
    button { padding: 8px 12px; margin-top: 10px; width: 100%; }
    .additive-row { border: 1px solid #ccc; padding: 10px; margin-top: 10px; border-radius: 6px; }
</style>
</head>
<body>

<h2>Candle Additive Calculator</h2>

<label>Total Candle Weight (oz):</label>
<input type="number" id="totalWeight" step="0.01" />

<h3>Additives</h3>
<div id="additives"></div>

<button onclick="addAdditive()">+ Add Additive</button>

<button onclick="calculate()">Calculate</button>

<h3>Results</h3>
<pre id="results"></pre>

<script>
function addAdditive() {
    const container = document.getElementById("additives");

    const div = document.createElement("div");
    div.className = "additive-row";

    div.innerHTML = `
        <label>Additive Name:</label>
        <input type="text" class="additive-name" placeholder="e.g., Stearic Acid" />

        <label>Percentage (%):</label>
        <input type="number" class="additive-percent" step="0.01" placeholder="e.g., 3.5" />

        <button onclick="this.parentElement.remove()">Remove</button>
    `;

    container.appendChild(div);
}

function calculate() {
    const totalWeight = parseFloat(document.getElementById("totalWeight").value);
    if (!totalWeight) {
        document.getElementById("results").textContent = "Enter a total candle weight.";
        return;
    }

    const names = Array.from(document.getElementsByClassName("additive-name"));
    const percents = Array.from(document.getElementsByClassName("additive-percent"));

    let additives = [];
    let percentTotal = 0;

    for (let i = 0; i < names.length; i++) {
        const name = names[i].value.trim();
        const percent = parseFloat(percents[i].value);

        if (!name || !percent) continue;

        percentTotal += percent;

        additives.push({
            name,
            percent,
            weight: (percent / 100) * totalWeight
        });
    }

    const waxPercent = 100 - percentTotal;
    const waxWeight = (waxPercent / 100) * totalWeight;

    let output = "";
    additives.forEach(a => {
        output += `${a.name}: ${a.weight.toFixed(4)} oz (${a.percent}%)\n`;
    });

    output += `\nWax: ${waxWeight.toFixed(4)} oz (${waxPercent.toFixed(2)}%)`;

    document.getElementById("results").textContent = output;
}
</script>

</body>
</html>
