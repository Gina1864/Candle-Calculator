<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Candle Calculator</title>

<style>
    body { 
        font-family: -apple-system, Arial; 
        margin: 20px; 
        background: #f7f7f7;
    }
    h2 { margin-bottom: 10px; }
    .card {
        background: white;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        margin-bottom: 15px;
    }
    label { font-size: 14px; font-weight: 600; }
    input {
        width: 100%;
        padding: 10px;
        margin-top: 6px;
        margin-bottom: 12px;
        border-radius: 8px;
        border: 1px solid #ccc;
        font-size: 15px;
    }
    button {
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        margin-top: 10px;
        cursor: pointer;
    }
    #addBtn { background: #000; color: white; }
    #calcBtn { background: #4d79ff; color: white; }
    .removeBtn {
        background: #ff4d4d;
        color: white;
        padding: 8px;
        border-radius: 8px;
        width: 100%;
        border: none;
        margin-top: 5px;
    }
    pre {
        font-size: 15px;
        background: #fff;
        padding: 15px;
        border-radius: 10px;
        box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
</style>
</head>

<body>

<h2>Candle Additive Calculator</h2>

<div class="card">
    <label>Total Candle Weight (oz)</label>
    <input type="number" id="totalWeight" step="0.01" placeholder="e.g., 8.0">
</div>

<h3>Additives</h3>

<div id="additives"></div>

<button id="addBtn" onclick="addAdditive()">+ Add Additive</button>
<button id="calcBtn" onclick="calculate()">Calculate</button>

<h3>Results</h3>
<pre id="results">Enter your candle weight and additives.</pre>


<script>
// Create the fragrance oil slot on load
window.onload = function() {
    addAdditive("Fragrance Oil", "");
};

function addAdditive(defaultName = "", defaultPercent = "") {
    const container = document.getElementById("additives");

    const div = document.createElement("div");
    div.className = "card additive-row";

    div.innerHTML = `
        <label>Additive Name</label>
        <input type="text" class="additive-name" value="${defaultName}" placeholder="e.g., Stearic Acid">

        <label>Percentage (%)</label>
        <input type="number" class="additive-percent" value="${defaultPercent}" step="0.01" placeholder="e.g., 3.5">

        ${defaultName === "Fragrance Oil" ? "" : `<button class="removeBtn" onclick="this.parentElement.remove()">Remove</button>`}
    `;

    container.appendChild(div);
}

function calculate() {
    const totalWeight = parseFloat(document.getElementById("totalWeight").value);
    if (!totalWeight) {
        document.getElementById("results").textContent = "Enter a total candle weight.";
        return;
    }

    const names = Array.from(document.getElementsByClassName("additive-name"));
    const percents = Array.from(document.getElementsByClassName("additive-percent"));

    let additives = [];
    let percentTotal = 0;

    for (let i = 0; i < names.length; i++) {
        const name = names[i].value.trim();
        const percent = parseFloat(percents[i].value);

        if (!name || !percent) continue;

        percentTotal += percent;

        additives.push({
            name,
            percent,
            weight: (percent / 100) * totalWeight
        });
    }

    const waxPercent = 100 - percentTotal;
    const waxWeight = (waxPercent / 100) * totalWeight;

    let output = "";
    additives.forEach(a => {
        output += `${a.name}: ${a.weight.toFixed(4)} oz (${a.percent}%)\n`;
    });

    output += `\nWax: ${waxWeight.toFixed(4)} oz (${waxPercent.toFixed(2)}%)`;

    document.getElementById("results").textContent = output;
}
</script>

</body>
</html>
